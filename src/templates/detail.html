<section>
  <header></header>
  <div class="app">
      <div style="background-image:url({{ doc.icon }})" class="icon"></div>
      <div class="details">
        <div class="trunc name">{{ doc.name|translate(doc) }}</div>
        <div class="trunc dev">{{ doc.author }}</div>
        {% set stars = doc.ratings.average|floor %}
        <div class="stars">{% for x in range(stars) %}&#9733;{% endfor %}{% if doc.ratings.average - stars >= 0.5 %}<span class="half">&#9733;</span>{% endif %}<span class="empty">{% for x in range(5 - stars) %}&#9733;{% endfor %}</span></div>
        {% set installed = docs[doc._id].installed %}
        <button  data-id="{{ doc._id }}" class="install{{ ' open' if installed }}">{{
          _('Open', 'open') if installed else _('Install', 'install') }}</button>
      </div>
      {% if doc.previews.length > 0 %}
      <div class="thumbnail">
          <button>&lt;</button>
          <img src="{{ doc.previews[0].thumbnail_url }}" class="screenshot">
          <button>&gt;</button>
          <!--
            FIXME: 
             detail view:
             - display individual links (the blue discs) to other thumbs (detail view only)
             - hide buttons if necessary in js (detail view only, they are hidden in search results)
             - switch thumb in js when clicking no buttons/disc links
             - display screenshot when clicked

          -->
      </div>
      {% endif %}
      <div class="description">
        <h3>{{ _('Description', 'description') }}</h3>
        {{ doc.description|translate(doc)|summarise }}
      </div>
    </div>
    <div class="actions">
      {% if doc.support_email %}
        <a class="button" href="mailto:{{ doc.support_email|translate(doc) }}">{{ _('Support Email', 'supportEmail') }}</a>
      {% endif %}
      {% if doc.support_url %}
        <a class="button" href="{{ doc.support_url|translate(doc) }}" rel="external">{{ _('Support Site', 'supportSite') }}</a>
      {% endif %}
      {% if doc.homepage %}
        <a class="button" href="{{ doc.homepage|translate(doc) }}" rel="external">{{ _('Homepage', 'homepage') }}</a>
      {% endif %}
      <!-- FIXME: implement privacy policy, report abuse -->
      <a class="button" href="{{ doc.privacy_policy }}">{{ _('Privacy Policy', 'privacyPolicy') }}</a>
      <a class="button" href="">{{ _('Report Abuse', 'reportAbuse') }}</a>
    </div>
</section>
